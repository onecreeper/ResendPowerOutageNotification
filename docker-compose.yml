version: '3.8'

services:
  power-monitor:
    build: .
    container_name: power-monitor-pro
    restart: always
    volumes:
      - ./power_monitor_data:/data
    env_file:
      - .env
    environment:
      # 从 .env 文件读取配置，如果 .env 中未设置则使用以下默认值

      # --- Resend.com 配置 (必需，请在 .env 中设置) ---
      # - RESEND_API_KEY=${RESEND_API_KEY}
      # - SENDER_FROM_ADDRESS=${SENDER_FROM_ADDRESS}
      # - RECIPIENT_EMAIL=${RECIPIENT_EMAIL}

      # --- 其他自定义配置 (可选) ---
      - SERVER_NAME=${SERVER_NAME:-跳板机}
      - OUTAGE_THRESHOLD=${OUTAGE_THRESHOLD:-180}
      - NETWORK_OUTAGE_THRESHOLD=${NETWORK_OUTAGE_THRESHOLD:-300}

      # --- 网络检测配置 (可选) ---
      - INTERNAL_TARGETS=${INTERNAL_TARGETS:-192.168.1.1,192.168.0.1}
      - EXTERNAL_TARGETS=${EXTERNAL_TARGETS:-114.114.114.114,223.5.5.5,baidu.com}
      - DNS_TARGET=${DNS_TARGET:-baidu.com}

      # --- 时区配置 (重要) ---
      - TZ=${TZ:-Asia/Shanghai}
